import{_ as xe}from"./preload-helper-CmsKOCeN.js";async function xr(d={}){var u,a=d,h=typeof window=="object",S=typeof WorkerGlobalScope<"u",D=typeof process=="object"&&process.versions?.node&&process.type!="renderer",P=!h&&!D&&!S;if(D){const{createRequire:e}=await xe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);var R=e(import.meta.url)}var E,b,w=import.meta.url,O="";if(D){if(!(typeof process=="object"&&process.versions?.node&&process.type!="renderer"))throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var H=process.versions.node,q=H.split(".").slice(0,3);if((q=1e4*q[0]+100*q[1]+1*q[2].split("-")[0])<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+H+")");var re=R("fs");w.startsWith("file:")&&(O=R("path").dirname(R("url").fileURLToPath(w))+"/"),b=e=>{e=me(e)?new URL(e):e;var r=re.readFileSync(e);return g(Buffer.isBuffer(r)),r},E=async(e,r=!0)=>{e=me(e)?new URL(e):e;var t=re.readFileSync(e,r?void 0:"utf8");return g(r?Buffer.isBuffer(t):typeof t=="string"),t},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else if(P){if(typeof process=="object"&&process.versions?.node&&process.type!="renderer"||typeof window=="object"||typeof WorkerGlobalScope<"u")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)")}else{if(!h&&!S)throw new Error("environment detection error");try{O=new URL(".",w).href}catch{}if(typeof window!="object"&&typeof WorkerGlobalScope>"u")throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");S&&(b=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),E=async e=>{if(me(e))return new Promise((t,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?t(i.response):n(i.status)},i.onerror=n,i.send(null)});var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw new Error(r.status+" : "+r.url)}}var fe,Se=console.log.bind(console),L=console.error.bind(console);g(!P,"shell environment detected but not enabled at build time.  Add `shell` to `-sENVIRONMENT` to enable."),typeof WebAssembly!="object"&&L("no native wasm support detected");var be=!1;function g(e,r){e||z("Assertion failed"+(r?": "+r:""))}var me=e=>e.startsWith("file://");function De(){if(!be){var e=Be();e==0&&(e+=4);var r=B[e>>2],t=B[e+4>>2];r==34821223&&t==2310721022||z(`Stack overflow! Stack cookie has been overwritten at ${ge(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ge(t)} ${ge(r)}`),B[0]!=1668509029&&z("Runtime error: The application has corrupted its heap memory area (address zero)!")}}var Ve,He,Fe,K,pe,_e,j,B,Ne,Oe,X;function ke(e){Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{configurable:!0,set(){z(`Attempt to set \`Module.${e}\` after it has already been processed.  This can happen, for example, when code is injected via '--post-js' rather than '--pre-js'`)}})}function k(e){return()=>g(!1,`call to '${e}' via reference taken before Wasm module initialization`)}function We(e){return e==="FS_createPath"||e==="FS_createDataFile"||e==="FS_createPreloadedFile"||e==="FS_unlink"||e==="addRunDependency"||e==="FS_createLazyFile"||e==="FS_createDevice"||e==="removeRunDependency"}function Ge(e,r){typeof globalThis>"u"||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){r()}})}function Ye(e,r){Ge(e,()=>{ne(`\`${e}\` is not longer defined by emscripten. ${r}`)})}function $e(e){Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{configurable:!0,get(){var r=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;We(e)&&(r+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),z(r)}})}(()=>{var e=new Int16Array(1),r=new Int8Array(e.buffer);if(e[0]=25459,r[0]!==115||r[1]!==99)throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),Ye("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),Ye("asm","Please use wasmExports instead");var ye=!1;function Ke(){var e=Fe.buffer;K=new Int8Array(e),_e=new Int16Array(e),pe=new Uint8Array(e),j=new Int32Array(e),B=new Uint32Array(e),Ne=new Float32Array(e),Oe=new Float64Array(e),X=new BigInt64Array(e),new BigUint64Array(e)}g(typeof Int32Array<"u"&&typeof Float64Array<"u"&&Int32Array.prototype.subarray!=null&&Int32Array.prototype.set!=null,"JS engine does not provide full typed array support");var he,te=0,Ee=null,ce={},oe=null;function Xe(e){te++,a.monitorRunDependencies?.(te),e?(g(!ce[e]),ce[e]=1,oe===null&&typeof setInterval<"u"&&(oe=setInterval(()=>{if(be)return clearInterval(oe),void(oe=null);var r=!1;for(var t in ce)r||(r=!0,L("still waiting on run dependencies:")),L(`dependency: ${t}`);r&&L("(end of list)")},1e4))):L("warning: run dependency added without ID")}function Re(e){if(te--,a.monitorRunDependencies?.(te),e?(g(ce[e]),delete ce[e]):L("warning: run dependency removed without ID"),te==0&&(oe!==null&&(clearInterval(oe),oe=null),Ee)){var r=Ee;Ee=null,r()}}function z(e){a.onAbort?.(e),L(e="Aborted("+e+")"),be=!0;var r=new WebAssembly.RuntimeError(e);throw He?.(r),r}function A(e,r){return(...t)=>{g(ye,`native function \`${e}\` called before runtime initialization`);var n=ae[e];return g(n,`exported native function \`${e}\` not found`),g(t.length<=r,`native function \`${e}\` called with ${t.length} args but expects ${r}`),n(...t)}}function wr(){return a.locateFile?(e="micropython.wasm",a.locateFile?a.locateFile(e,O):O+e):new URL(""+new URL("micropython-BCcvOIo0.wasm",import.meta.url).href,import.meta.url).href;var e}async function Sr(e){if(!fe)try{var r=await E(e);return new Uint8Array(r)}catch{}return function(t){if(t==he&&fe)return new Uint8Array(fe);if(b)return b(t);throw"both async and sync fetching of the wasm failed"}(e)}async function br(e,r,t){if(!e&&typeof WebAssembly.instantiateStreaming=="function"&&!me(r)&&!D)try{var n=fetch(r,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(i){L(`wasm streaming compile failed: ${i}`),L("falling back to ArrayBuffer instantiation")}return async function(i,s){try{var l=await Sr(i);return await WebAssembly.instantiate(l,s)}catch(_){L(`failed to asynchronously prepare wasm: ${_}`),me(he)&&L(`warning: Loading from a file URI (${he}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),z(_)}}(r,t)}var Je=e=>{for(;e.length>0;)e.shift()(a)},qe=[],Fr=e=>qe.push(e),Qe=[],kr=e=>Qe.push(e);function je(e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":return K[e];case"i16":return _e[e>>1];case"i32":return j[e>>2];case"i64":return X[e>>3];case"float":return Ne[e>>2];case"double":return Oe[e>>3];case"*":return B[e>>2];default:z(`invalid type for getValue: ${r}`)}}var ge=e=>(g(typeof e=="number"),"0x"+(e>>>=0).toString(16).padStart(8,"0")),G=e=>dr(e),Y=()=>fr(),ne=e=>{ne.shown||={},ne.shown[e]||(ne.shown[e]=1,D&&(e="warning: "+e),L(e))},x={isAbs:e=>e.charAt(0)==="/",splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=x.isAbs(e),t=e.slice(-1)==="/";return(e=x.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=x.splitPath(e),t=r[0],n=r[1];return t||n?(n&&(n=n.slice(0,-1)),t+n):"."},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>x.normalize(e.join("/")),join2:(e,r)=>x.normalize(e+"/"+r)},Ze=e=>{(Ze=(()=>{if(D){var r=R("crypto");return t=>r.randomFillSync(t)}return t=>crypto.getRandomValues(t)})())(e)},ie={resolve:(...e)=>{for(var r="",t=!1,n=e.length-1;n>=-1&&!t;n--){var i=n>=0?e[n]:o.cwd();if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";r=i+"/"+r,t=x.isAbs(i)}return(t?"/":"")+(r=x.normalizeArray(r.split("/").filter(s=>!!s),!t).join("/"))||"."},relative:(e,r)=>{function t(f){for(var v=0;v<f.length&&f[v]==="";v++);for(var p=f.length-1;p>=0&&f[p]==="";p--);return v>p?[]:f.slice(v,p-v+1)}e=ie.resolve(e).slice(1),r=ie.resolve(r).slice(1);for(var n=t(e.split("/")),i=t(r.split("/")),s=Math.min(n.length,i.length),l=s,_=0;_<s;_++)if(n[_]!==i[_]){l=_;break}var c=[];for(_=l;_<n.length;_++)c.push("..");return(c=c.concat(i.slice(l))).join("/")}},er=typeof TextDecoder<"u"?new TextDecoder:void 0,de=(e,r=0,t,n)=>{var i=((v,p,y,m)=>{var M=p+y;if(m)return M;for(;v[p]&&!(p>=M);)++p;return p})(e,r,t,n);if(i-r>16&&e.buffer&&er)return er.decode(e.subarray(r,i));for(var s="";r<i;){var l=e[r++];if(128&l){var _=63&e[r++];if((224&l)!=192){var c=63&e[r++];if((240&l)==224?l=(15&l)<<12|_<<6|c:((248&l)!=240&&ne("Invalid UTF-8 leading byte "+ge(l)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),l=(7&l)<<18|_<<12|c<<6|63&e[r++]),l<65536)s+=String.fromCharCode(l);else{var f=l-65536;s+=String.fromCharCode(55296|f>>10,56320|1023&f)}}else s+=String.fromCharCode((31&l)<<6|_)}else s+=String.fromCharCode(l)}return s},Ie=[],Te=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},rr=(e,r,t,n)=>{if(g(typeof e=="string",`stringToUTF8Array expects a string (got ${typeof e})`),!(n>0))return 0;for(var i=t,s=t+n-1,l=0;l<e.length;++l){var _=e.codePointAt(l);if(_<=127){if(t>=s)break;r[t++]=_}else if(_<=2047){if(t+1>=s)break;r[t++]=192|_>>6,r[t++]=128|63&_}else if(_<=65535){if(t+2>=s)break;r[t++]=224|_>>12,r[t++]=128|_>>6&63,r[t++]=128|63&_}else{if(t+3>=s)break;_>1114111&&ne("Invalid Unicode code point "+ge(_)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),r[t++]=240|_>>18,r[t++]=128|_>>12&63,r[t++]=128|_>>6&63,r[t++]=128|63&_,l++}}return r[t]=0,t-i},Ce=(e,r,t)=>{var n=Te(e)+1,i=new Array(n),s=rr(e,i,0,i.length);return i.length=s,i},se={ttys:[],init(){},shutdown(){},register(e,r){se.ttys[e]={input:[],output:[],ops:r},o.registerDevice(e,se.stream_ops)},stream_ops:{open(e){var r=se.ttys[e.node.rdev];if(!r)throw new o.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,n,i){if(!e.tty||!e.tty.ops.get_char)throw new o.ErrnoError(60);for(var s=0,l=0;l<n;l++){var _;try{_=e.tty.ops.get_char(e.tty)}catch{throw new o.ErrnoError(29)}if(_===void 0&&s===0)throw new o.ErrnoError(6);if(_==null)break;s++,r[t+l]=_}return s&&(e.node.atime=Date.now()),s},write(e,r,t,n,i){if(!e.tty||!e.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var s=0;s<n;s++)e.tty.ops.put_char(e.tty,r[t+s])}catch{throw new o.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),s}},default_tty_ops:{get_char:e=>(()=>{if(!Ie.length){var r=null;if(D){var t=Buffer.alloc(256),n=0,i=process.stdin.fd;try{n=re.readSync(i,t,0,256)}catch(s){if(!s.toString().includes("EOF"))throw s;n=0}n>0&&(r=t.slice(0,n).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(r=window.prompt("Input: "))!==null&&(r+=`
`);if(!r)return null;Ie=Ce(r)}return Ie.shift()})(),put_char(e,r){r===null||r===10?(Se(de(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(Se(de(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,r,t)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,r){r===null||r===10?(L(de(e.output)),e.output=[]):r!=0&&e.output.push(r)},fsync(e){e.output?.length>0&&(L(de(e.output)),e.output=[])}}},tr=e=>{z("internal error: mmapAlloc called but `emscripten_builtin_memalign` native symbol not exported")},F={ops_table:null,mount:e=>F.createNode(null,"/",16895,0),createNode(e,r,t,n){if(o.isBlkdev(t)||o.isFIFO(t))throw new o.ErrnoError(63);F.ops_table||={dir:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr,lookup:F.node_ops.lookup,mknod:F.node_ops.mknod,rename:F.node_ops.rename,unlink:F.node_ops.unlink,rmdir:F.node_ops.rmdir,readdir:F.node_ops.readdir,symlink:F.node_ops.symlink},stream:{llseek:F.stream_ops.llseek}},file:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr},stream:{llseek:F.stream_ops.llseek,read:F.stream_ops.read,write:F.stream_ops.write,mmap:F.stream_ops.mmap,msync:F.stream_ops.msync}},link:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr,readlink:F.node_ops.readlink},stream:{}},chrdev:{node:{getattr:F.node_ops.getattr,setattr:F.node_ops.setattr},stream:o.chrdev_stream_ops}};var i=o.createNode(e,r,t,n);return o.isDir(i.mode)?(i.node_ops=F.ops_table.dir.node,i.stream_ops=F.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=F.ops_table.file.node,i.stream_ops=F.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=F.ops_table.link.node,i.stream_ops=F.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=F.ops_table.chrdev.node,i.stream_ops=F.ops_table.chrdev.stream),i.atime=i.mtime=i.ctime=Date.now(),e&&(e.contents[r]=i,e.atime=e.mtime=e.ctime=i.atime),i},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){r=Math.max(r,t*(t<1048576?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var n=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=o.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,o.isDir(e.mode)?r.size=4096:o.isFile(e.mode)?r.size=e.usedBytes:o.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.atime),r.mtime=new Date(e.mtime),r.ctime=new Date(e.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){for(const t of["mode","atime","mtime","ctime"])r[t]!=null&&(e[t]=r[t]);r.size!==void 0&&F.resizeFileStorage(e,r.size)},lookup(e,r){throw new o.ErrnoError(44)},mknod:(e,r,t,n)=>F.createNode(e,r,t,n),rename(e,r,t){var n;try{n=o.lookupNode(r,t)}catch{}if(n){if(o.isDir(e.mode))for(var i in n.contents)throw new o.ErrnoError(55);o.hashRemoveNode(n)}delete e.parent.contents[e.name],r.contents[t]=e,e.name=t,r.ctime=r.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,r){delete e.contents[r],e.ctime=e.mtime=Date.now()},rmdir(e,r){var t=o.lookupNode(e,r);for(var n in t.contents)throw new o.ErrnoError(55);delete e.contents[r],e.ctime=e.mtime=Date.now()},readdir:e=>[".","..",...Object.keys(e.contents)],symlink(e,r,t){var n=F.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!o.isLink(e.mode))throw new o.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,i){var s=e.node.contents;if(i>=e.node.usedBytes)return 0;var l=Math.min(e.node.usedBytes-i,n);if(g(l>=0),l>8&&s.subarray)r.set(s.subarray(i,i+l),t);else for(var _=0;_<l;_++)r[t+_]=s[i+_];return l},write(e,r,t,n,i,s){if(g(!(r instanceof ArrayBuffer)),r.buffer===K.buffer&&(s=!1),!n)return 0;var l=e.node;if(l.mtime=l.ctime=Date.now(),r.subarray&&(!l.contents||l.contents.subarray)){if(s)return g(i===0,"canOwn must imply no weird position inside the file"),l.contents=r.subarray(t,t+n),l.usedBytes=n,n;if(l.usedBytes===0&&i===0)return l.contents=r.slice(t,t+n),l.usedBytes=n,n;if(i+n<=l.usedBytes)return l.contents.set(r.subarray(t,t+n),i),n}if(F.expandFileStorage(l,i+n),l.contents.subarray&&r.subarray)l.contents.set(r.subarray(t,t+n),i);else for(var _=0;_<n;_++)l.contents[i+_]=r[t+_];return l.usedBytes=Math.max(l.usedBytes,i+n),n},llseek(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&o.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new o.ErrnoError(28);return n},mmap(e,r,t,n,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);var s,l,_=e.node.contents;if(2&i||!_||_.buffer!==K.buffer){if(l=!0,!(s=tr()))throw new o.ErrnoError(48);_&&((t>0||t+r<_.length)&&(_=_.subarray?_.subarray(t,t+r):Array.prototype.slice.call(_,t,t+r)),K.set(_,s))}else l=!1,s=_.byteOffset;return{ptr:s,allocated:l}},msync:(e,r,t,n,i)=>(F.stream_ops.write(e,r,0,n,t,!1),0)}},or=[],Le=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},Z=(e,r,t)=>(g(typeof e=="number",`UTF8ToString expects a number (got ${typeof e})`),e?de(pe,e,r,t):""),nr={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class extends Error{name="ErrnoError";constructor(e){for(var r in super(ye?(t=>Z(_r(t)))(e):""),this.errno=e,nr)if(nr[r]===e){this.code=r;break}}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(2097155&this.flags)!=1}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.id=o.nextInode++,this.name=r,this.mode=t,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return o.isDir(this.mode)}get isDevice(){return o.isChrdev(this.mode)}},lookupPath(e,r={}){if(!e)throw new o.ErrnoError(44);r.follow_mount??=!0,x.isAbs(e)||(e=o.cwd()+"/"+e);e:for(var t=0;t<40;t++){for(var n=e.split("/").filter(f=>!!f),i=o.root,s="/",l=0;l<n.length;l++){var _=l===n.length-1;if(_&&r.parent)break;if(n[l]!==".")if(n[l]!==".."){s=x.join2(s,n[l]);try{i=o.lookupNode(i,n[l])}catch(f){if(f?.errno===44&&_&&r.noent_okay)return{path:s};throw f}if(!o.isMountpoint(i)||_&&!r.follow_mount||(i=i.mounted.root),o.isLink(i.mode)&&(!_||r.follow)){if(!i.node_ops.readlink)throw new o.ErrnoError(52);var c=i.node_ops.readlink(i);x.isAbs(c)||(c=x.dirname(s)+"/"+c),e=c+"/"+n.slice(l+1).join("/");continue e}}else{if(s=x.dirname(s),o.isRoot(i)){e=s+"/"+n.slice(l+1).join("/"),t--;continue e}i=i.parent}}return{path:s,node:i}}throw new o.ErrnoError(32)},getPath(e){for(var r;;){if(o.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?`${t}/${r}`:t+r:t}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%o.nameTable.length},hashAddNode(e){var r=o.hashName(e.parent.id,e.name);e.name_next=o.nameTable[r],o.nameTable[r]=e},hashRemoveNode(e){var r=o.hashName(e.parent.id,e.name);if(o.nameTable[r]===e)o.nameTable[r]=e.name_next;else for(var t=o.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=o.mayLookup(e);if(t)throw new o.ErrnoError(t);for(var n=o.hashName(e.id,r),i=o.nameTable[n];i;i=i.name_next){var s=i.name;if(i.parent.id===e.id&&s===r)return i}return o.lookup(e,r)},createNode(e,r,t,n){g(typeof e=="object");var i=new o.FSNode(e,r,t,n);return o.hashAddNode(i),i},destroyNode(e){o.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(61440&e)==32768,isDir:e=>(61440&e)==16384,isLink:e=>(61440&e)==40960,isChrdev:e=>(61440&e)==8192,isBlkdev:e=>(61440&e)==24576,isFIFO:e=>(61440&e)==4096,isSocket:e=>!(49152&~e),flagsToPermissionString(e){var r=["r","w","rw"][3&e];return 512&e&&(r+="w"),r},nodePermissions:(e,r)=>o.ignorePermissions||(!r.includes("r")||292&e.mode)&&(!r.includes("w")||146&e.mode)&&(!r.includes("x")||73&e.mode)?0:2,mayLookup(e){if(!o.isDir(e.mode))return 54;var r=o.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate(e,r){if(!o.isDir(e.mode))return 54;try{return o.lookupNode(e,r),20}catch{}return o.nodePermissions(e,"wx")},mayDelete(e,r,t){var n;try{n=o.lookupNode(e,r)}catch(s){return s.errno}var i=o.nodePermissions(e,"wx");if(i)return i;if(t){if(!o.isDir(n.mode))return 54;if(o.isRoot(n)||o.getPath(n)===o.cwd())return 10}else if(o.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?o.isLink(e.mode)?32:o.isDir(e.mode)&&(o.flagsToPermissionString(r)!=="r"||576&r)?31:o.nodePermissions(e,o.flagsToPermissionString(r)):44,checkOpExists(e,r){if(!e)throw new o.ErrnoError(r);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=o.MAX_OPEN_FDS;e++)if(!o.streams[e])return e;throw new o.ErrnoError(33)},getStreamChecked(e){var r=o.getStream(e);if(!r)throw new o.ErrnoError(8);return r},getStream:e=>o.streams[e],createStream:(e,r=-1)=>(g(r>=-1),e=Object.assign(new o.FSStream,e),r==-1&&(r=o.nextfd()),e.fd=r,o.streams[r]=e,e),closeStream(e){o.streams[e]=null},dupStream(e,r=-1){var t=o.createStream(e,r);return t.stream_ops?.dup?.(t),t},doSetAttr(e,r,t){var n=e?.stream_ops.setattr,i=n?e:r;n??=r.node_ops.setattr,o.checkOpExists(n,63),n(i,t)},chrdev_stream_ops:{open(e){var r=o.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new o.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,r)=>e<<8|r,registerDevice(e,r){o.devices[e]={stream_ops:r}},getDevice:e=>o.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push(...n.mounts)}return r},syncfs(e,r){typeof e=="function"&&(r=e,e=!1),o.syncFSRequests++,o.syncFSRequests>1&&L(`warning: ${o.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=o.getMounts(o.root.mount),n=0;function i(l){return g(o.syncFSRequests>0),o.syncFSRequests--,r(l)}function s(l){if(l)return s.errored?void 0:(s.errored=!0,i(l));++n>=t.length&&i(null)}t.forEach(l=>{if(!l.type.syncfs)return s(null);l.type.syncfs(l,e,s)})},mount(e,r,t){if(typeof e=="string")throw e;var n,i=t==="/",s=!t;if(i&&o.root)throw new o.ErrnoError(10);if(!i&&!s){var l=o.lookupPath(t,{follow_mount:!1});if(t=l.path,n=l.node,o.isMountpoint(n))throw new o.ErrnoError(10);if(!o.isDir(n.mode))throw new o.ErrnoError(54)}var _={type:e,opts:r,mountpoint:t,mounts:[]},c=e.mount(_);return c.mount=_,_.root=c,i?o.root=c:n&&(n.mounted=_,n.mount&&n.mount.mounts.push(_)),c},unmount(e){var r=o.lookupPath(e,{follow_mount:!1});if(!o.isMountpoint(r.node))throw new o.ErrnoError(28);var t=r.node,n=t.mounted,i=o.getMounts(n);Object.keys(o.nameTable).forEach(l=>{for(var _=o.nameTable[l];_;){var c=_.name_next;i.includes(_.mount)&&o.destroyNode(_),_=c}}),t.mounted=null;var s=t.mount.mounts.indexOf(n);g(s!==-1),t.mount.mounts.splice(s,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod(e,r,t){var n=o.lookupPath(e,{parent:!0}).node,i=x.basename(e);if(!i)throw new o.ErrnoError(28);if(i==="."||i==="..")throw new o.ErrnoError(20);var s=o.mayCreate(n,i);if(s)throw new o.ErrnoError(s);if(!n.node_ops.mknod)throw new o.ErrnoError(63);return n.node_ops.mknod(n,i,r,t)},statfs:e=>o.statfsNode(o.lookupPath(e,{follow:!0}).node),statfsStream:e=>o.statfsNode(e.node),statfsNode(e){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:o.nextInode,ffree:o.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(r,e.node_ops.statfs(e.mount.opts.root)),r},create:(e,r=438)=>(r&=4095,r|=32768,o.mknod(e,r,0)),mkdir:(e,r=511)=>(r&=1023,r|=16384,o.mknod(e,r,0)),mkdirTree(e,r){var t=e.split("/"),n="";for(var i of t)if(i){(n||x.isAbs(e))&&(n+="/"),n+=i;try{o.mkdir(n,r)}catch(s){if(s.errno!=20)throw s}}},mkdev:(e,r,t)=>(t===void 0&&(t=r,r=438),r|=8192,o.mknod(e,r,t)),symlink(e,r){if(!ie.resolve(e))throw new o.ErrnoError(44);var t=o.lookupPath(r,{parent:!0}).node;if(!t)throw new o.ErrnoError(44);var n=x.basename(r),i=o.mayCreate(t,n);if(i)throw new o.ErrnoError(i);if(!t.node_ops.symlink)throw new o.ErrnoError(63);return t.node_ops.symlink(t,n,e)},rename(e,r){var t,n,i=x.dirname(e),s=x.dirname(r),l=x.basename(e),_=x.basename(r);if(t=o.lookupPath(e,{parent:!0}).node,n=o.lookupPath(r,{parent:!0}).node,!t||!n)throw new o.ErrnoError(44);if(t.mount!==n.mount)throw new o.ErrnoError(75);var c,f=o.lookupNode(t,l),v=ie.relative(e,s);if(v.charAt(0)!==".")throw new o.ErrnoError(28);if((v=ie.relative(r,i)).charAt(0)!==".")throw new o.ErrnoError(55);try{c=o.lookupNode(n,_)}catch{}if(f!==c){var p=o.isDir(f.mode),y=o.mayDelete(t,l,p);if(y)throw new o.ErrnoError(y);if(y=c?o.mayDelete(n,_,p):o.mayCreate(n,_))throw new o.ErrnoError(y);if(!t.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(f)||c&&o.isMountpoint(c))throw new o.ErrnoError(10);if(n!==t&&(y=o.nodePermissions(t,"w")))throw new o.ErrnoError(y);o.hashRemoveNode(f);try{t.node_ops.rename(f,n,_),f.parent=n}catch(m){throw m}finally{o.hashAddNode(f)}}},rmdir(e){var r=o.lookupPath(e,{parent:!0}).node,t=x.basename(e),n=o.lookupNode(r,t),i=o.mayDelete(r,t,!0);if(i)throw new o.ErrnoError(i);if(!r.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(n))throw new o.ErrnoError(10);r.node_ops.rmdir(r,t),o.destroyNode(n)},readdir(e){var r=o.lookupPath(e,{follow:!0}).node;return o.checkOpExists(r.node_ops.readdir,54)(r)},unlink(e){var r=o.lookupPath(e,{parent:!0}).node;if(!r)throw new o.ErrnoError(44);var t=x.basename(e),n=o.lookupNode(r,t),i=o.mayDelete(r,t,!1);if(i)throw new o.ErrnoError(i);if(!r.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(n))throw new o.ErrnoError(10);r.node_ops.unlink(r,t),o.destroyNode(n)},readlink(e){var r=o.lookupPath(e).node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.readlink)throw new o.ErrnoError(28);return r.node_ops.readlink(r)},stat(e,r){var t=o.lookupPath(e,{follow:!r}).node;return o.checkOpExists(t.node_ops.getattr,63)(t)},fstat(e){var r=o.getStreamChecked(e),t=r.node,n=r.stream_ops.getattr,i=n?r:t;return n??=t.node_ops.getattr,o.checkOpExists(n,63),n(i)},lstat:e=>o.stat(e,!0),doChmod(e,r,t,n){o.doSetAttr(e,r,{mode:4095&t|-4096&r.mode,ctime:Date.now(),dontFollow:n})},chmod(e,r,t){var n;typeof e=="string"?n=o.lookupPath(e,{follow:!t}).node:n=e,o.doChmod(null,n,r,t)},lchmod(e,r){o.chmod(e,r,!0)},fchmod(e,r){var t=o.getStreamChecked(e);o.doChmod(t,t.node,r,!1)},doChown(e,r,t){o.doSetAttr(e,r,{timestamp:Date.now(),dontFollow:t})},chown(e,r,t,n){var i;typeof e=="string"?i=o.lookupPath(e,{follow:!n}).node:i=e,o.doChown(null,i,n)},lchown(e,r,t){o.chown(e,r,t,!0)},fchown(e,r,t){var n=o.getStreamChecked(e);o.doChown(n,n.node,!1)},doTruncate(e,r,t){if(o.isDir(r.mode))throw new o.ErrnoError(31);if(!o.isFile(r.mode))throw new o.ErrnoError(28);var n=o.nodePermissions(r,"w");if(n)throw new o.ErrnoError(n);o.doSetAttr(e,r,{size:t,timestamp:Date.now()})},truncate(e,r){if(r<0)throw new o.ErrnoError(28);var t;typeof e=="string"?t=o.lookupPath(e,{follow:!0}).node:t=e,o.doTruncate(null,t,r)},ftruncate(e,r){var t=o.getStreamChecked(e);if(r<0||!(2097155&t.flags))throw new o.ErrnoError(28);o.doTruncate(t,t.node,r)},utime(e,r,t){var n=o.lookupPath(e,{follow:!0}).node;o.checkOpExists(n.node_ops.setattr,63)(n,{atime:r,mtime:t})},open(e,r,t=438){if(e==="")throw new o.ErrnoError(44);var n,i;if(t=64&(r=typeof r=="string"?(f=>{var v={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[f];if(v===void 0)throw new Error(`Unknown file open mode: ${f}`);return v})(r):r)?4095&t|32768:0,typeof e=="object")n=e;else{i=e.endsWith("/");var s=o.lookupPath(e,{follow:!(131072&r),noent_okay:!0});n=s.node,e=s.path}var l=!1;if(64&r)if(n){if(128&r)throw new o.ErrnoError(20)}else{if(i)throw new o.ErrnoError(31);n=o.mknod(e,511|t,0),l=!0}if(!n)throw new o.ErrnoError(44);if(o.isChrdev(n.mode)&&(r&=-513),65536&r&&!o.isDir(n.mode))throw new o.ErrnoError(54);if(!l){var _=o.mayOpen(n,r);if(_)throw new o.ErrnoError(_)}512&r&&!l&&o.truncate(n,0),r&=-131713;var c=o.createStream({node:n,path:o.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return c.stream_ops.open&&c.stream_ops.open(c),l&&o.chmod(n,511&t),!a.logReadFiles||1&r||e in o.readFiles||(o.readFiles[e]=1),c},close(e){if(o.isClosed(e))throw new o.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{o.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek(e,r,t){if(o.isClosed(e))throw new o.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new o.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new o.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,n,i){if(g(t>=0),n<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if((2097155&e.flags)==1)throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.read)throw new o.ErrnoError(28);var s=i!==void 0;if(s){if(!e.seekable)throw new o.ErrnoError(70)}else i=e.position;var l=e.stream_ops.read(e,r,t,n,i);return s||(e.position+=l),l},write(e,r,t,n,i,s){if(g(t>=0),n<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(e))throw new o.ErrnoError(8);if(!(2097155&e.flags))throw new o.ErrnoError(8);if(o.isDir(e.node.mode))throw new o.ErrnoError(31);if(!e.stream_ops.write)throw new o.ErrnoError(28);e.seekable&&1024&e.flags&&o.llseek(e,0,2);var l=i!==void 0;if(l){if(!e.seekable)throw new o.ErrnoError(70)}else i=e.position;var _=e.stream_ops.write(e,r,t,n,i,s);return l||(e.position+=_),_},mmap(e,r,t,n,i){if(2&n&&!(2&i)&&(2097155&e.flags)!=2)throw new o.ErrnoError(2);if((2097155&e.flags)==1)throw new o.ErrnoError(2);if(!e.stream_ops.mmap)throw new o.ErrnoError(43);if(!r)throw new o.ErrnoError(28);return e.stream_ops.mmap(e,r,t,n,i)},msync:(e,r,t,n,i)=>(g(t>=0),e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,i):0),ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new o.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error(`Invalid encoding type "${r.encoding}"`);var t=o.open(e,r.flags),n=o.stat(e).size,i=new Uint8Array(n);return o.read(t,i,0,n,0),r.encoding==="utf8"&&(i=de(i)),o.close(t),i},writeFile(e,r,t={}){t.flags=t.flags||577;var n=o.open(e,t.flags,t.mode);if(typeof r=="string"&&(r=new Uint8Array(Ce(r))),!ArrayBuffer.isView(r))throw new Error("Unsupported data type");o.write(n,r,0,r.byteLength,void 0,t.canOwn),o.close(n)},cwd:()=>o.currentPath,chdir(e){var r=o.lookupPath(e,{follow:!0});if(r.node===null)throw new o.ErrnoError(44);if(!o.isDir(r.node.mode))throw new o.ErrnoError(54);var t=o.nodePermissions(r.node,"x");if(t)throw new o.ErrnoError(t);o.currentPath=r.path},createDefaultDirectories(){o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices(){o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(n,i,s,l,_)=>l,llseek:()=>0}),o.mkdev("/dev/null",o.makedev(1,3)),se.register(o.makedev(5,0),se.default_tty_ops),se.register(o.makedev(6,0),se.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var e=new Uint8Array(1024),r=0,t=()=>(r===0&&(Ze(e),r=e.byteLength),e[--r]);o.createDevice("/dev","random",t),o.createDevice("/dev","urandom",t),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories(){o.mkdir("/proc");var e=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount(){var r=o.createNode(e,"fd",16895,73);return r.stream_ops={llseek:F.stream_ops.llseek},r.node_ops={lookup(t,n){var i=+n,s=o.getStreamChecked(i),l={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>s.path},id:i+1};return l.parent=l,l},readdir:()=>Array.from(o.streams.entries()).filter(([t,n])=>n).map(([t,n])=>t.toString())},r}},{},"/proc/self/fd")},createStandardStreams(e,r,t){e?o.createDevice("/dev","stdin",e):o.symlink("/dev/tty","/dev/stdin"),r?o.createDevice("/dev","stdout",null,r):o.symlink("/dev/tty","/dev/stdout"),t?o.createDevice("/dev","stderr",null,t):o.symlink("/dev/tty1","/dev/stderr");var n=o.open("/dev/stdin",0),i=o.open("/dev/stdout",1),s=o.open("/dev/stderr",1);g(n.fd===0,`invalid handle for stdin (${n.fd})`),g(i.fd===1,`invalid handle for stdout (${i.fd})`),g(s.fd===2,`invalid handle for stderr (${s.fd})`)},staticInit(){o.nameTable=new Array(4096),o.mount(F,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:F}},init(e,r,t){g(!o.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),o.initialized=!0,e??=a.stdin,r??=a.stdout,t??=a.stderr,o.createStandardStreams(e,r,t)},quit(){for(var e of(o.initialized=!1,lr(0),o.streams))e&&o.close(e)},findObject(e,r){var t=o.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{e=(n=o.lookupPath(e,{follow:!r})).path}catch{}var t={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=o.lookupPath(e,{parent:!0});t.parentExists=!0,t.parentPath=n.path,t.parentObject=n.node,t.name=x.basename(e),n=o.lookupPath(e,{follow:!r}),t.exists=!0,t.path=n.path,t.object=n.node,t.name=n.node.name,t.isRoot=n.path==="/"}catch(i){t.error=i.errno}return t},createPath(e,r,t,n){e=typeof e=="string"?e:o.getPath(e);for(var i=r.split("/").reverse();i.length;){var s=i.pop();if(s){var l=x.join2(e,s);try{o.mkdir(l)}catch(_){if(_.errno!=20)throw _}e=l}}return l},createFile(e,r,t,n,i){var s=x.join2(typeof e=="string"?e:o.getPath(e),r),l=Le(n,i);return o.create(s,l)},createDataFile(e,r,t,n,i,s){var l=r;e&&(e=typeof e=="string"?e:o.getPath(e),l=r?x.join2(e,r):e);var _=Le(n,i),c=o.create(l,_);if(t){if(typeof t=="string"){for(var f=new Array(t.length),v=0,p=t.length;v<p;++v)f[v]=t.charCodeAt(v);t=f}o.chmod(c,146|_);var y=o.open(c,577);o.write(y,t,0,t.length,0,s),o.close(y),o.chmod(c,_)}},createDevice(e,r,t,n){var i=x.join2(typeof e=="string"?e:o.getPath(e),r),s=Le(!!t,!!n);o.createDevice.major??=64;var l=o.makedev(o.createDevice.major++,0);return o.registerDevice(l,{open(_){_.seekable=!1},close(_){n?.buffer?.length&&n(10)},read(_,c,f,v,p){for(var y=0,m=0;m<v;m++){var M;try{M=t()}catch{throw new o.ErrnoError(29)}if(M===void 0&&y===0)throw new o.ErrnoError(6);if(M==null)break;y++,c[f+m]=M}return y&&(_.node.atime=Date.now()),y},write(_,c,f,v,p){for(var y=0;y<v;y++)try{n(c[f+y])}catch{throw new o.ErrnoError(29)}return v&&(_.node.mtime=_.node.ctime=Date.now()),y}}),o.mkdev(i,s,l)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=b(e.url),e.usedBytes=e.contents.length}catch{throw new o.ErrnoError(29)}},createLazyFile(e,r,t,n,i){class s{lengthKnown=!1;chunks=[];get(p){if(!(p>this.length-1||p<0)){var y=p%this.chunkSize,m=p/this.chunkSize|0;return this.getter(m)[y]}}setDataGetter(p){this.getter=p}cacheLength(){var p=new XMLHttpRequest;if(p.open("HEAD",t,!1),p.send(null),!(p.status>=200&&p.status<300||p.status===304))throw new Error("Couldn't load "+t+". Status: "+p.status);var y,m=Number(p.getResponseHeader("Content-length")),M=(y=p.getResponseHeader("Accept-Ranges"))&&y==="bytes",I=(y=p.getResponseHeader("Content-Encoding"))&&y==="gzip",U=1048576;M||(U=m);var V=this;V.setDataGetter(ee=>{var ve=ee*U,ue=(ee+1)*U-1;if(ue=Math.min(ue,m-1),V.chunks[ee]===void 0&&(V.chunks[ee]=((ze,Ae)=>{if(ze>Ae)throw new Error("invalid range ("+ze+", "+Ae+") or no bytes requested!");if(Ae>m-1)throw new Error("only "+m+" bytes available! programmer error!");var W=new XMLHttpRequest;if(W.open("GET",t,!1),m!==U&&W.setRequestHeader("Range","bytes="+ze+"-"+Ae),W.responseType="arraybuffer",W.overrideMimeType&&W.overrideMimeType("text/plain; charset=x-user-defined"),W.send(null),!(W.status>=200&&W.status<300||W.status===304))throw new Error("Couldn't load "+t+". Status: "+W.status);return W.response!==void 0?new Uint8Array(W.response||[]):Ce(W.responseText||"")})(ve,ue)),V.chunks[ee]===void 0)throw new Error("doXHR failed!");return V.chunks[ee]}),!I&&m||(U=m=1,m=this.getter(0).length,U=m,Se("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=m,this._chunkSize=U,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){if(!S)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var l={isDevice:!1,contents:new s}}else l={isDevice:!1,url:t};var _=o.createFile(e,r,l,n,i);l.contents?_.contents=l.contents:l.url&&(_.contents=null,_.url=l.url),Object.defineProperties(_,{usedBytes:{get:function(){return this.contents.length}}});var c={};function f(v,p,y,m,M){var I=v.node.contents;if(M>=I.length)return 0;var U=Math.min(I.length-M,m);if(g(U>=0),I.slice)for(var V=0;V<U;V++)p[y+V]=I[M+V];else for(V=0;V<U;V++)p[y+V]=I.get(M+V);return U}return Object.keys(_.stream_ops).forEach(v=>{var p=_.stream_ops[v];c[v]=(...y)=>(o.forceLoadFile(_),p(...y))}),c.read=(v,p,y,m,M)=>(o.forceLoadFile(_),f(v,p,y,m,M)),c.mmap=(v,p,y,m,M)=>{o.forceLoadFile(_);var I=tr();if(!I)throw new o.ErrnoError(48);return f(v,K,I,p,y),{ptr:I,allocated:!0}},_.stream_ops=c,_},absolutePath(){z("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){z("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){z("FS.createLink has been removed; use FS.symlink instead")},joinPath(){z("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){z("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){z("FS.standardizePath has been removed; use PATH.normalize instead")}},T={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(x.isAbs(r))return r;var n;if(e===-100?n=o.cwd():n=T.getStreamFromFD(e).path,r.length==0){if(!t)throw new o.ErrnoError(44);return n}return n+"/"+r},writeStat(e,r){j[e>>2]=r.dev,j[e+4>>2]=r.mode,B[e+8>>2]=r.nlink,j[e+12>>2]=r.uid,j[e+16>>2]=r.gid,j[e+20>>2]=r.rdev,X[e+24>>3]=BigInt(r.size),j[e+32>>2]=4096,j[e+36>>2]=r.blocks;var t=r.atime.getTime(),n=r.mtime.getTime(),i=r.ctime.getTime();return X[e+40>>3]=BigInt(Math.floor(t/1e3)),B[e+48>>2]=t%1e3*1e3*1e3,X[e+56>>3]=BigInt(Math.floor(n/1e3)),B[e+64>>2]=n%1e3*1e3*1e3,X[e+72>>3]=BigInt(Math.floor(i/1e3)),B[e+80>>2]=i%1e3*1e3*1e3,X[e+88>>3]=BigInt(r.ino),0},writeStatFs(e,r){j[e+4>>2]=r.bsize,j[e+40>>2]=r.bsize,j[e+8>>2]=r.blocks,j[e+12>>2]=r.bfree,j[e+16>>2]=r.bavail,j[e+20>>2]=r.files,j[e+24>>2]=r.ffree,j[e+28>>2]=r.fsid,j[e+44>>2]=r.flags,j[e+36>>2]=r.namelen},doMsync(e,r,t,n,i){if(!o.isFile(r.node.mode))throw new o.ErrnoError(43);if(2&n)return 0;var s=pe.slice(e,e+t);o.msync(r,s,i,t,n)},getStreamFromFD:e=>o.getStreamChecked(e),varargs:void 0,getStr:e=>Z(e)},Me=(e,r,t)=>(g(typeof t=="number","stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),rr(e,pe,r,t)),Tr=(e,r)=>(g(r,"alignment argument is required"),Math.ceil(e/r)*r),Mr=e=>{var r=Fe.buffer.byteLength,t=(e-r+65535)/65536|0;try{return Fe.grow(t),Ke(),1}catch(n){L(`growMemory: Attempted to grow heap from ${r} bytes to ${e} bytes, but got error: ${n}`)}},Ue,ir=[],J=e=>{var r=ir[e];return r||(ir[e]=r=Ue.get(e)),g(Ue.get(e)==r,"JavaScript-side Wasm function table mirror is out of date!"),r},sr=e=>ur(e),ar=(e,r,t,n,i)=>{var s={string:y=>{var m=0;return y!=null&&y!==0&&(m=(M=>{var I=Te(M)+1,U=sr(I);return Me(M,U,I),U})(y)),m},array:y=>{var m,M,I=sr(y.length);return M=I,g((m=y).length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),K.set(m,M),I}},l=(y=>{var m=a["_"+y];return g(m,"Cannot call unknown function "+y+", make sure it is exported"),m})(e),_=[],c=0;if(g(r!=="array",'Return type should not be "array".'),n)for(var f=0;f<n.length;f++){var v=s[t[f]];v?(c===0&&(c=Y()),_[f]=v(n[f])):_[f]=n[f]}var p=l(..._);return p=function(y){return c!==0&&G(c),function(m){return r==="string"?Z(m):r==="boolean"?!!m:m}(y)}(p)};o.createPreloadedFile=(e,r,t,n,i,s,l,_,c,f)=>{var v=r?ie.resolve(x.join2(e,r)):e,p=(m=>{for(var M=m;;){if(!ce[m])return m;m=M+Math.random()}})(`cp ${v}`);function y(m){function M(I){f?.(),_||((...U)=>{o.createDataFile(...U)})(e,r,I,n,i,c),s?.(),Re(p)}((I,U,V,ee)=>{typeof Browser<"u"&&Browser.init();var ve=!1;return or.forEach(ue=>{ve||ue.canHandle(U)&&(ue.handle(I,U,V,ee),ve=!0)}),ve})(m,v,M,()=>{l?.(),Re(p)})||M(m)}Xe(p),typeof t=="string"?(async m=>{var M=await E(m);return g(M,`Loading data file "${m}" failed (no arrayBuffer).`),new Uint8Array(M)})(t).then(y,l):y(t)},o.staticInit(),globalThis.crypto===void 0&&(globalThis.crypto=R("crypto"));var Pe,Pr=Date.now();a.noExitRuntime&&a.noExitRuntime,a.preloadPlugins&&(or=a.preloadPlugins),a.print&&(Se=a.print),a.printErr&&(L=a.printErr),a.wasmBinary&&(fe=a.wasmBinary),Pe="fetchSettings",Object.getOwnPropertyDescriptor(a,Pe)&&z(`\`Module.${Pe}\` was supplied but \`${Pe}\` not included in INCOMING_MODULE_JS_API`),a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,g(a.memoryInitializerPrefixURL===void 0,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),g(a.pthreadMainPrefixURL===void 0,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),g(a.cdInitializerPrefixURL===void 0,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),g(a.filePackagePrefixURL===void 0,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),g(a.read===void 0,"Module.read option was removed"),g(a.readAsync===void 0,"Module.readAsync option was removed (modify readAsync in JS)"),g(a.readBinary===void 0,"Module.readBinary option was removed (modify readBinary in JS)"),g(a.setWindowTitle===void 0,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),g(a.TOTAL_MEMORY===void 0,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),g(a.ENVIRONMENT===void 0,"Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)"),g(a.STACK_SIZE===void 0,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),g(a.wasmMemory===void 0,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),g(a.INITIAL_MEMORY===void 0,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically"),a.ccall=ar,a.cwrap=(e,r,t,n)=>(...i)=>ar(e,r,t,i),a.setValue=function(e,r,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":K[e]=r;break;case"i16":_e[e>>1]=r;break;case"i32":j[e>>2]=r;break;case"i64":X[e>>3]=BigInt(r);break;case"float":Ne[e>>2]=r;break;case"double":Oe[e>>3]=r;break;case"*":B[e>>2]=r;break;default:z(`invalid type for setValue: ${t}`)}},a.getValue=je,a.PATH=x,a.PATH_FS=ie,a.UTF8ToString=Z,a.stringToUTF8=Me,a.lengthBytesUTF8=Te,a.FS=o,["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertI32PairToI53Checked","convertU32PairToI53","getTempRet0","setTempRet0","zeroMemory","exitJS","withStackSave","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","readEmAsmArgs","jstoi_q","getExecutableName","autoResumeAudioContext","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","addOnInit","addOnPostCtor","addOnPreMain","addOnExit","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","convertJsFunctionToWasm","getEmptyTableSlot","updateTableMap","getFunctionAddress","addFunction","removeFunction","intArrayToString","AsciiToString","stringToAscii","UTF16ToString","stringToUTF16","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","getEnvStrings","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","safeSetTimeout","setImmediateWrapped","safeRequestAnimationFrame","clearImmediateWrapped","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","isLeapYear","ydayFromDate","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","demangle","stackTrace"].forEach(function(e){Ge(e,()=>{var r=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,t=e;t.startsWith("_")||(t="$"+e),r+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${t}')`,We(e)&&(r+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ne(r)}),$e(e)}),["run","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","wasmExports","HEAPF32","HEAPF64","HEAP8","HEAPU8","HEAP16","HEAPU16","HEAP32","HEAPU32","HEAP64","HEAPU64","writeStackCookie","checkStackCookie","INT53_MAX","INT53_MIN","bigintToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","timers","warnOnce","readEmAsmArgsArray","asyncLoad","alignMemory","mmapAlloc","wasmTable","getUniqueRunDependency","noExitRuntime","addOnPreRun","addOnPostRun","freeTableIndexes","functionsInTableMap","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","intArrayFromString","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","doReadv","doWritev","initRandomFill","randomFill","emSetImmediate","emClearImmediate_deps","emClearImmediate","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","requestFullscreen","requestFullScreen","setCanvasSize","getUserMedia","createContext","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_unlink","FS_createPath","FS_createDevice","FS_readFile","FS_root","FS_mounts","FS_devices","FS_streams","FS_nextInode","FS_nameTable","FS_currentPath","FS_initialized","FS_ignorePermissions","FS_filesystems","FS_syncFSRequests","FS_readFiles","FS_lookupPath","FS_getPath","FS_hashName","FS_hashAddNode","FS_hashRemoveNode","FS_lookupNode","FS_createNode","FS_destroyNode","FS_isRoot","FS_isMountpoint","FS_isFile","FS_isDir","FS_isLink","FS_isChrdev","FS_isBlkdev","FS_isFIFO","FS_isSocket","FS_flagsToPermissionString","FS_nodePermissions","FS_mayLookup","FS_mayCreate","FS_mayDelete","FS_mayOpen","FS_checkOpExists","FS_nextfd","FS_getStreamChecked","FS_getStream","FS_createStream","FS_closeStream","FS_dupStream","FS_doSetAttr","FS_chrdev_stream_ops","FS_major","FS_minor","FS_makedev","FS_registerDevice","FS_getDevice","FS_getMounts","FS_syncfs","FS_mount","FS_unmount","FS_lookup","FS_mknod","FS_statfs","FS_statfsStream","FS_statfsNode","FS_create","FS_mkdir","FS_mkdev","FS_symlink","FS_rename","FS_rmdir","FS_readdir","FS_readlink","FS_stat","FS_fstat","FS_lstat","FS_doChmod","FS_chmod","FS_lchmod","FS_fchmod","FS_doChown","FS_chown","FS_lchown","FS_fchown","FS_doTruncate","FS_truncate","FS_ftruncate","FS_utime","FS_open","FS_close","FS_isClosed","FS_llseek","FS_read","FS_write","FS_mmap","FS_msync","FS_ioctl","FS_writeFile","FS_cwd","FS_chdir","FS_createDefaultDirectories","FS_createDefaultDevices","FS_createSpecialDirectories","FS_createStandardStreams","FS_staticInit","FS_init","FS_quit","FS_findObject","FS_analyzePath","FS_createFile","FS_createDataFile","FS_forceLoadFile","FS_createLazyFile","FS_absolutePath","FS_createFolder","FS_createLink","FS_joinPath","FS_mmapAlloc","FS_standardizePath","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr","jstoi_s"].forEach($e),a._free=k("_free"),a._malloc=k("_malloc"),a._mp_sched_keyboard_interrupt=k("_mp_sched_keyboard_interrupt"),a._mp_js_init=k("_mp_js_init"),a._mp_js_register_js_module=k("_mp_js_register_js_module"),a._mp_js_do_import=k("_mp_js_do_import"),a._proxy_convert_mp_to_js_obj_cside=k("_proxy_convert_mp_to_js_obj_cside"),a._mp_js_do_exec=k("_mp_js_do_exec"),a._mp_js_do_exec_async=k("_mp_js_do_exec_async"),a._mp_js_repl_init=k("_mp_js_repl_init"),a._mp_js_repl_process_char=k("_mp_js_repl_process_char"),a._mp_hal_get_interrupt_char=k("_mp_hal_get_interrupt_char"),a._proxy_c_init=k("_proxy_c_init"),a._proxy_c_free_obj=k("_proxy_c_free_obj"),a._proxy_c_to_js_call=k("_proxy_c_to_js_call"),a._proxy_c_to_js_dir=k("_proxy_c_to_js_dir"),a._proxy_c_to_js_has_attr=k("_proxy_c_to_js_has_attr"),a._proxy_c_to_js_lookup_attr=k("_proxy_c_to_js_lookup_attr"),a._proxy_c_to_js_store_attr=k("_proxy_c_to_js_store_attr"),a._proxy_c_to_js_delete_attr=k("_proxy_c_to_js_delete_attr"),a._proxy_c_to_js_get_type=k("_proxy_c_to_js_get_type"),a._proxy_c_to_js_get_array=k("_proxy_c_to_js_get_array"),a._proxy_c_to_js_get_dict=k("_proxy_c_to_js_get_dict"),a._proxy_c_to_js_get_iter=k("_proxy_c_to_js_get_iter"),a._proxy_c_to_js_iternext=k("_proxy_c_to_js_iternext"),a._proxy_c_to_js_resume=k("_proxy_c_to_js_resume");var lr=k("_fflush"),_r=k("_strerror"),Be=k("_emscripten_stack_get_end"),$=k("_setThrew"),cr=k("_emscripten_stack_init"),dr=k("__emscripten_stack_restore"),ur=k("__emscripten_stack_alloc"),fr=k("_emscripten_stack_get_current"),mr,pr={__syscall_chdir:function(e){try{return e=T.getStr(e),o.chdir(e),0}catch(r){if(o===void 0||r.name!=="ErrnoError")throw r;return-r.errno}},__syscall_fstat64:function(e,r){try{return T.writeStat(r,o.fstat(e))}catch(t){if(o===void 0||t.name!=="ErrnoError")throw t;return-t.errno}},__syscall_getcwd:function(e,r){try{if(r===0)return-28;var t=o.cwd(),n=Te(t)+1;return r<n?-68:(Me(t,e,r),n)}catch(i){if(o===void 0||i.name!=="ErrnoError")throw i;return-i.errno}},__syscall_getdents64:function(e,r,t){try{var n=T.getStreamFromFD(e);n.getdents||=o.readdir(n.path);for(var i=0,s=o.llseek(n,0,1),l=Math.floor(s/280),_=Math.min(n.getdents.length,l+Math.floor(t/280)),c=l;c<_;c++){var f,v,p=n.getdents[c];if(p===".")f=n.node.id,v=4;else if(p==="..")f=o.lookupPath(n.path,{parent:!0}).node.id,v=4;else{var y;try{y=o.lookupNode(n.node,p)}catch(m){if(m?.errno===28)continue;throw m}f=y.id,v=o.isChrdev(y.mode)?2:o.isDir(y.mode)?4:o.isLink(y.mode)?10:8}g(f),X[r+i>>3]=BigInt(f),X[r+i+8>>3]=BigInt(280*(c+1)),_e[r+i+16>>1]=280,K[r+i+18]=v,Me(p,r+i+19,256),i+=280}return o.llseek(n,280*c,0),i}catch(m){if(o===void 0||m.name!=="ErrnoError")throw m;return-m.errno}},__syscall_lstat64:function(e,r){try{return e=T.getStr(e),T.writeStat(r,o.lstat(e))}catch(t){if(o===void 0||t.name!=="ErrnoError")throw t;return-t.errno}},__syscall_mkdirat:function(e,r,t){try{return r=T.getStr(r),r=T.calculateAt(e,r),o.mkdir(r,t,0),0}catch(n){if(o===void 0||n.name!=="ErrnoError")throw n;return-n.errno}},__syscall_newfstatat:function(e,r,t,n){try{r=T.getStr(r);var i=256&n,s=4096&n;return g(!(n&=-6401),`unknown flags in __syscall_newfstatat: ${n}`),r=T.calculateAt(e,r,s),T.writeStat(t,i?o.lstat(r):o.stat(r))}catch(l){if(o===void 0||l.name!=="ErrnoError")throw l;return-l.errno}},__syscall_openat:function(e,r,t,n){T.varargs=n;try{r=T.getStr(r),r=T.calculateAt(e,r);var i=n?(()=>{g(T.varargs!=null);var s=j[+T.varargs>>2];return T.varargs+=4,s})():0;return o.open(r,t,i).fd}catch(s){if(o===void 0||s.name!=="ErrnoError")throw s;return-s.errno}},__syscall_poll:function(e,r,t){try{for(var n=0,i=0;i<r;i++){var s=e+8*i,l=j[s>>2],_=_e[s+4>>1],c=32,f=o.getStream(l);f&&(c=T.DEFAULT_POLLMASK,f.stream_ops.poll&&(c=f.stream_ops.poll(f,-1))),(c&=24|_)&&n++,_e[s+6>>1]=c}return n}catch(v){if(o===void 0||v.name!=="ErrnoError")throw v;return-v.errno}},__syscall_renameat:function(e,r,t,n){try{return r=T.getStr(r),n=T.getStr(n),r=T.calculateAt(e,r),n=T.calculateAt(t,n),o.rename(r,n),0}catch(i){if(o===void 0||i.name!=="ErrnoError")throw i;return-i.errno}},__syscall_rmdir:function(e){try{return e=T.getStr(e),o.rmdir(e),0}catch(r){if(o===void 0||r.name!=="ErrnoError")throw r;return-r.errno}},__syscall_stat64:function(e,r){try{return e=T.getStr(e),T.writeStat(r,o.stat(e))}catch(t){if(o===void 0||t.name!=="ErrnoError")throw t;return-t.errno}},__syscall_statfs64:function(e,r,t){try{return g(r===64),T.writeStatFs(t,o.statfs(T.getStr(e))),0}catch(n){if(o===void 0||n.name!=="ErrnoError")throw n;return-n.errno}},__syscall_unlinkat:function(e,r,t){try{if(r=T.getStr(r),r=T.calculateAt(e,r),t){if(t!==512)return-28;o.rmdir(r)}else o.unlink(r);return 0}catch(n){if(o===void 0||n.name!=="ErrnoError")throw n;return-n.errno}},_abort_js:()=>z("native code called abort()"),_emscripten_throw_longjmp:()=>{throw 1/0},call0:function(e,r){C((0,proxy_js_ref[e])(),r)},call0_kwarg:function(e,r,t,n,i,s){const l=proxy_js_ref[e],_={};for(let f=0;f<t;++f){const v=Z(je(n+4*f,"i32")),p=N(i+3*f*4);_[v]=p}let c;c=r?l.call(_):l(_),C(c,s)},call1:function(e,r,t,n){const i=N(t),s=proxy_js_ref[e];let l;l=r?s.call(i):s(i),C(l,n)},call1_kwarg:function(e,r,t,n,i,s,l){const _=proxy_js_ref[e],c=N(t),f={};for(let p=0;p<n;++p){const y=Z(je(i+4*p,"i32")),m=N(s+3*p*4);f[y]=m}let v;v=r?_.call(c,f):_(c,f),C(v,l)},call2:function(e,r,t,n,i){const s=N(t),l=N(n),_=proxy_js_ref[e];let c;c=r?_.call(s,l):_(s,l),C(c,i)},calln:function(e,r,t,n,i){const s=proxy_js_ref[e],l=[];for(let c=0;c<t;++c){const f=N(n+3*c*4);l.push(f)}let _;_=r?s.call(...l):s(...l),C(_,i)},create_promise:function(e,r){const t=N(e);C(new Promise(t),r)},emscripten_resize_heap:e=>{var r=pe.length;if(g((e>>>=0)>r),e>2147483648)return L(`Cannot enlarge memory, requested ${e} bytes, but the limit is 2147483648 bytes!`),!1;for(var t=1;t<=4;t*=2){var n=r*(1+.2/t);n=Math.min(n,e+100663296);var i=Math.min(2147483648,Tr(Math.max(e,n),65536));if(Mr(i))return!0}return L(`Failed to grow the heap from ${r} bytes to ${i} bytes, not enough memory!`),!1},fd_close:function(e){try{var r=T.getStreamFromFD(e);return o.close(r),0}catch(t){if(o===void 0||t.name!=="ErrnoError")throw t;return t.errno}},fd_read:function(e,r,t,n){try{var i=((s,l,_,c)=>{for(var f=0,v=0;v<_;v++){var p=B[l>>2],y=B[l+4>>2];l+=8;var m=o.read(s,K,p,y,c);if(m<0)return-1;if(f+=m,m<y)break;c!==void 0&&(c+=m)}return f})(T.getStreamFromFD(e),r,t);return B[n>>2]=i,0}catch(s){if(o===void 0||s.name!=="ErrnoError")throw s;return s.errno}},fd_seek:function(e,r,t,n){var i;r=(i=r)<-9007199254740992||i>9007199254740992?NaN:Number(i);try{if(isNaN(r))return 61;var s=T.getStreamFromFD(e);return o.llseek(s,r,t),X[n>>3]=BigInt(s.position),s.getdents&&r===0&&t===0&&(s.getdents=null),0}catch(l){if(o===void 0||l.name!=="ErrnoError")throw l;return l.errno}},fd_sync:function(e){try{var r=T.getStreamFromFD(e);return r.stream_ops?.fsync?r.stream_ops.fsync(r):0}catch(t){if(o===void 0||t.name!=="ErrnoError")throw t;return t.errno}},fd_write:function(e,r,t,n){try{var i=((s,l,_,c)=>{for(var f=0,v=0;v<_;v++){var p=B[l>>2],y=B[l+4>>2];l+=8;var m=o.write(s,K,p,y,c);if(m<0)return-1;if(f+=m,m<y)break;c!==void 0&&(c+=m)}return f})(T.getStreamFromFD(e),r,t);return B[n>>2]=i,0}catch(s){if(o===void 0||s.name!=="ErrnoError")throw s;return s.errno}},has_attr:function(e,r){const t=proxy_js_ref[e];return Z(r)in t},invoke_i:function(e){var r=Y();try{return J(e)()}catch(t){if(G(r),t!==t+0)throw t;$(1,0)}},invoke_ii:function(e,r){var t=Y();try{return J(e)(r)}catch(n){if(G(t),n!==n+0)throw n;$(1,0)}},invoke_iii:function(e,r,t){var n=Y();try{return J(e)(r,t)}catch(i){if(G(n),i!==i+0)throw i;$(1,0)}},invoke_iiii:function(e,r,t,n){var i=Y();try{return J(e)(r,t,n)}catch(s){if(G(i),s!==s+0)throw s;$(1,0)}},invoke_iiiii:function(e,r,t,n,i){var s=Y();try{return J(e)(r,t,n,i)}catch(l){if(G(s),l!==l+0)throw l;$(1,0)}},invoke_iiiiii:function(e,r,t,n,i,s){var l=Y();try{return J(e)(r,t,n,i,s)}catch(_){if(G(l),_!==_+0)throw _;$(1,0)}},invoke_v:function(e){var r=Y();try{J(e)()}catch(t){if(G(r),t!==t+0)throw t;$(1,0)}},invoke_vi:function(e,r){var t=Y();try{J(e)(r)}catch(n){if(G(t),n!==n+0)throw n;$(1,0)}},invoke_vii:function(e,r,t){var n=Y();try{J(e)(r,t)}catch(i){if(G(n),i!==i+0)throw i;$(1,0)}},invoke_viii:function(e,r,t,n){var i=Y();try{J(e)(r,t,n)}catch(s){if(G(i),s!==s+0)throw s;$(1,0)}},invoke_viiii:function(e,r,t,n,i){var s=Y();try{J(e)(r,t,n,i)}catch(l){if(G(s),l!==l+0)throw l;$(1,0)}},js_check_existing:function(e){return function(r){const t=globalThis.proxy_js_map.get(r)?.deref();if(t===void 0)return-1;for(let n=0;n<globalThis.proxy_js_existing.length;++n)if(globalThis.proxy_js_existing[n]===void 0)return globalThis.proxy_js_existing[n]=t,n;return globalThis.proxy_js_existing.push(t),globalThis.proxy_js_existing.length-1}(e)},js_get_error_info:function(e,r,t){const n=proxy_js_ref[e];C(n.name,r),C(n.message,t)},js_get_iter:function(e,r){C(proxy_js_ref[e][Symbol.iterator](),r)},js_get_proxy_js_ref_info:function(e){let r=0;for(const t of proxy_js_ref)t!==void 0&&++r;a.setValue(e,proxy_js_ref.length,"i32"),a.setValue(e+4,r,"i32")},js_iter_next:function(e,r){const t=proxy_js_ref[e].next();return!t.done&&(C(t.value,r),!0)},js_reflect_construct:function(e,r,t,n){const i=proxy_js_ref[e],s=[];for(let l=0;l<r;++l)s.push(N(t+3*l*4));C(Reflect.construct(i,s),n)},js_subscr_load:function(e,r,t){const n=proxy_js_ref[e],i=function(s,l){let _=l;if(typeof _=="number"&&(_<0&&(_+=s.length),_<0||_>=s.length))throw new gr("IndexError","index out of range");return _}(n,N(r));C(n[i],t)},js_subscr_store:function(e,r,t){proxy_js_ref[e][N(r)]=N(t)},js_then_continue:function(e,r,t,n,i){const s=N(r),l=N(t),_=N(n);C(proxy_js_ref[e].then(c=>{s(c,null,l,_)},c=>{s(null,c,l,_)}),i)},js_then_reject:function(e,r){let t;try{t=N(e)}catch(n){t=n}N(r)(t)},js_then_resolve:function(e,r){const t=N(e);N(r)(t)},lookup_attr:function(e,r,t){const n=proxy_js_ref[e],i=Z(r);let s=n[i];return s!==void 0||i in n?(C(s,t),typeof s!="function"||"_ref"in s?1:2):0},mp_js_random_u32:()=>globalThis.crypto.getRandomValues(new Uint32Array(1))[0],mp_js_ticks_ms:()=>Date.now()-Pr,mp_js_time_ms:()=>Date.now(),proxy_convert_mp_to_js_then_js_to_js_then_js_to_mp_obj_jsside:function(e){const r=N(e);C(Q.toJs(r),e)},proxy_convert_mp_to_js_then_js_to_mp_obj_jsside:function(e){qr(N(e),e)},proxy_js_free_obj:function(e){e>=hr&&(proxy_js_ref_map.delete(proxy_js_ref[e]),proxy_js_ref[e]=void 0,e<proxy_js_ref_next&&(proxy_js_ref_next=e))},store_attr:function(e,r,t){const n=Z(r),i=N(t);proxy_js_ref[e][n]=i}},ae=await async function(){function e(n,i){return ae=n.exports,g(Fe=ae.memory,"memory not found in wasm exports"),Ke(),g(Ue=ae.__indirect_function_table,"table not found in wasm exports"),function(s){a._free=A("free",1),a._malloc=A("malloc",1),a._mp_sched_keyboard_interrupt=A("mp_sched_keyboard_interrupt",0),a._mp_js_init=A("mp_js_init",2),a._mp_js_register_js_module=A("mp_js_register_js_module",2),a._mp_js_do_import=A("mp_js_do_import",2),a._proxy_convert_mp_to_js_obj_cside=A("proxy_convert_mp_to_js_obj_cside",2),a._mp_js_do_exec=A("mp_js_do_exec",3),a._mp_js_do_exec_async=A("mp_js_do_exec_async",3),a._mp_js_repl_init=A("mp_js_repl_init",0),a._mp_js_repl_process_char=A("mp_js_repl_process_char",1),a._mp_hal_get_interrupt_char=A("mp_hal_get_interrupt_char",0),a._proxy_c_init=A("proxy_c_init",0),a._proxy_c_free_obj=A("proxy_c_free_obj",1),a._proxy_c_to_js_call=A("proxy_c_to_js_call",4),a._proxy_c_to_js_dir=A("proxy_c_to_js_dir",2),a._proxy_c_to_js_has_attr=A("proxy_c_to_js_has_attr",2),a._proxy_c_to_js_lookup_attr=A("proxy_c_to_js_lookup_attr",3),a._proxy_c_to_js_store_attr=A("proxy_c_to_js_store_attr",3),a._proxy_c_to_js_delete_attr=A("proxy_c_to_js_delete_attr",2),a._proxy_c_to_js_get_type=A("proxy_c_to_js_get_type",1),a._proxy_c_to_js_get_array=A("proxy_c_to_js_get_array",2),a._proxy_c_to_js_get_dict=A("proxy_c_to_js_get_dict",2),a._proxy_c_to_js_get_iter=A("proxy_c_to_js_get_iter",1),a._proxy_c_to_js_iternext=A("proxy_c_to_js_iternext",2),a._proxy_c_to_js_resume=A("proxy_c_to_js_resume",2),lr=A("fflush",1),_r=A("strerror",1),Be=s.emscripten_stack_get_end,s.emscripten_stack_get_base,$=A("setThrew",2),cr=s.emscripten_stack_init,s.emscripten_stack_get_free,dr=s._emscripten_stack_restore,ur=s._emscripten_stack_alloc,fr=s.emscripten_stack_get_current}(ae),Re("wasm-instantiate"),ae}Xe("wasm-instantiate");var r=a,t={env:pr,wasi_snapshot_preview1:pr};return a.instantiateWasm?new Promise((n,i)=>{try{a.instantiateWasm(t,(s,l)=>{n(e(s))})}catch(s){L(`Module.instantiateWasm callback failed with error: ${s}`),i(s)}}):(he??=wr(),function(n){return g(a===r,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),r=null,e(n.instance)}(await br(fe,he,t)))}();function Ar(){var e;cr(),g(!(3&(e=Be()))),e==0&&(e+=4),B[e>>2]=34821223,B[e+4>>2]=2310721022,B[0]=1668509029}(function(){if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.shift()();ke("preInit")})(),function e(){function r(){g(!mr),mr=!0,a.calledRun=!0,be||(g(!ye),ye=!0,De(),a.noFSInit||o.initialized||o.init(),ae.__wasm_call_ctors(),o.ignorePermissions=!1,Ve?.(a),a.onRuntimeInitialized?.(),ke("onRuntimeInitialized"),g(!a._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(De(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Fr(a.postRun.shift());ke("postRun"),Je(qe)}())}te>0?Ee=e:(Ar(),function(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)kr(a.preRun.shift());ke("preRun"),Je(Qe)}(),te>0?Ee=e:(a.setStatus?(a.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>a.setStatus(""),1),r()},1)):r(),De()))}(),u=ye?a:new Promise((e,r)=>{Ve=e,He=r});for(const e of Object.keys(a))e in d||Object.defineProperty(d,e,{configurable:!0,get(){z(`Access to module property ('${e}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return u}async function yr(d){const{pystack:u,heapsize:a,url:h,stdin:S,stdout:D,stderr:P,linebuffer:R}=Object.assign({pystack:2048,heapsize:1048576,linebuffer:!0},d);let E={locateFile:(w,O)=>h||O+w};E._textDecoder=new TextDecoder,S!==void 0&&(E.stdin=S),D!==void 0&&(R?(E._stdoutBuffer=[],E.stdout=w=>{w===10?(D(E._textDecoder.decode(new Uint8Array(E._stdoutBuffer))),E._stdoutBuffer=[]):E._stdoutBuffer.push(w)}):E.stdout=w=>D(new Uint8Array([w]))),P!==void 0&&(R?(E._stderrBuffer=[],E.stderr=w=>{w===10?(P(E._textDecoder.decode(new Uint8Array(E._stderrBuffer))),E._stderrBuffer=[]):E._stderrBuffer.push(w)}):E.stderr=w=>P(new Uint8Array([w]))),E=await xr(E),globalThis.Module=E,Jr();const b=w=>{const O=E._malloc(12);return E.ccall("mp_js_do_import","null",["string","pointer"],[w,O]),le(O)};return E.ccall("mp_js_init","null",["number","number"],[u,a]),E.ccall("proxy_c_init","null",[],[]),{_module:E,PyProxy:Q,FS:E.FS,globals:{__dict__:b("__main__").__dict__,get(w){return this.__dict__[w]},set(w,O){this.__dict__[w]=O},delete(w){delete this.__dict__[w]}},registerJsModule(w,O){const H=E._malloc(12);C(O,H),E.ccall("mp_js_register_js_module","null",["string","pointer"],[w,H]),E._free(H)},pyimport:b,runPython(w){const O=E.lengthBytesUTF8(w),H=E._malloc(O+1);E.stringToUTF8(w,H,O+1);const q=E._malloc(12);return E.ccall("mp_js_do_exec","number",["pointer","number","pointer"],[H,O,q]),E._free(H),le(q)},runPythonAsync(w){const O=E.lengthBytesUTF8(w),H=E._malloc(O+1);E.stringToUTF8(w,H,O+1);const q=E._malloc(12);E.ccall("mp_js_do_exec_async","number",["pointer","number","pointer"],[H,O,q]),E._free(H);const re=le(q);return re instanceof we?Promise.resolve(re):re},replInit(){E.ccall("mp_js_repl_init","null",["null"])},replProcessChar:w=>E.ccall("mp_js_repl_process_char","number",["number"],[w]),replProcessCharWithAsyncify:async w=>E.ccall("mp_js_repl_process_char","number",["number"],[w],{async:!0})}}if(globalThis.loadMicroPython=yr,typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.argv.length>1){const d=await xe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),u=await xe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url),a=d.resolve(u.fileURLToPath(import.meta.url)),h=d.resolve(process.argv[1]);a.includes(h)&&async function(){const S=await xe(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);let D=131072,P="",R=!0;for(let b=2;b<process.argv.length;b++)if(process.argv[b]==="-X"&&b<process.argv.length-1){if(process.argv[b+1].includes("heapsize=")){D=parseInt(process.argv[b+1].split("heapsize=")[1]);const w=process.argv[b+1].substr(-1).toLowerCase();w==="k"?D*=1024:w==="m"&&(D*=1048576),++b}}else P+=S.readFileSync(process.argv[b],"utf8"),R=!1;process.stdin.isTTY===!1&&(P=S.readFileSync(0,"utf8"),R=!1);const E=await yr({heapsize:D,stdout:b=>process.stdout.write(b),linebuffer:!1});if(R)E.replInit(),process.stdin.setRawMode(!0),process.stdin.on("data",b=>{for(let w=0;w<b.length;w++)E.replProcessCharWithAsyncify(b[w]).then(O=>{O&&process.exit()})});else{if(P.endsWith(`asyncio.run(main())
`)){const b=E.pyimport("asyncio");b.run=async w=>{await b.create_task(w)}}try{E.runPython(P)}catch(b){if(b.name!=="PythonError")throw b;b.type==="SystemExit"||console.error(b.message)}}}()}class Q{constructor(u){this._ref=u}static toJs(u){if(!(u instanceof Q))return u;const a=Module.ccall("proxy_c_to_js_get_type","number",["number"],[u._ref]);if(a===1||a===2){const h=Module._malloc(8),S=Module._malloc(12);Module.ccall("proxy_c_to_js_get_array","null",["number","pointer"],[u._ref,h]);const D=Module.getValue(h,"i32"),P=Module.getValue(h+4,"i32"),R=[];for(let E=0;E<D;++E){Module.ccall("proxy_convert_mp_to_js_obj_cside","null",["pointer","pointer"],[Module.getValue(P+4*E,"i32"),S]);const b=N(S);R.push(Q.toJs(b))}return Module._free(h),Module._free(S),R}if(a===3){const h=Module._malloc(8),S=Module._malloc(12);Module.ccall("proxy_c_to_js_get_dict","null",["number","pointer"],[u._ref,h]);const D=Module.getValue(h,"i32"),P=Module.getValue(h+4,"i32"),R={};for(let E=0;E<D;++E){const b=Module.getValue(P+8*E,"i32");if(b>8){Module.ccall("proxy_convert_mp_to_js_obj_cside","null",["pointer","pointer"],[b,S]);const w=N(S),O=Module.getValue(P+8*E+4,"i32");Module.ccall("proxy_convert_mp_to_js_obj_cside","null",["pointer","pointer"],[O,S]);const H=N(S);R[w]=Q.toJs(H)}}return Module._free(h),Module._free(S),R}return u}}const Dr={isExtensible:()=>!0,ownKeys(d){const u=Module._malloc(12);Module.ccall("proxy_c_to_js_dir","null",["number","pointer"],[d._ref,u]);const a=le(u);return Q.toJs(a).filter(h=>!h.startsWith("__"))},getOwnPropertyDescriptor:(d,u)=>({value:d[u],enumerable:!0,writable:!0,configurable:!0}),has:(d,u)=>typeof u!="string"?u===Symbol.iterator:Module.ccall("proxy_c_to_js_has_attr","number",["number","string"],[d._ref,u]),get(d,u){if(u==="_ref")return d._ref;if(u==="then"||typeof u!="string"){if(u===Symbol.iterator){const h=Module.ccall("proxy_c_to_js_get_iter","number",["number"],[d._ref]);return function*(){const S=Module._malloc(12);for(;Module.ccall("proxy_c_to_js_iternext","number",["number","pointer"],[h,S]);)yield N(S);Module._free(S)}}return}const a=Module._malloc(12);return Module.ccall("proxy_c_to_js_lookup_attr","null",["number","string","pointer"],[d._ref,u,a]),le(a)},set(d,u,a){const h=Module._malloc(12);C(a,h);const S=Module.ccall("proxy_c_to_js_store_attr","number",["number","string","number"],[d._ref,u,h]);return Module._free(h),S},deleteProperty:(d,u)=>Module.ccall("proxy_c_to_js_delete_attr","number",["number","string"],[d._ref,u])};class we{constructor(u){this._ref=u}then(u,a){const h=Module._malloc(36);return C(u,h+12),C(a,h+24),Module.ccall("proxy_c_to_js_resume","null",["number","pointer"],[this._ref,h]),le(h)}}const hr=2,Nr=-1,Or=0,Rr=1,jr=2,Ir=3,Cr=4,Lr=5,Ur=6,Br=7,zr=9,Vr=10,Hr=0,Wr=1,Gr=2,Yr=3,$r=4,Kr=5,Er=6,Xr=7;class gr extends Error{constructor(u,a){super(a),this.name="PythonError",this.type=u}}function Jr(){globalThis.proxy_js_ref=[globalThis,void 0],globalThis.proxy_js_ref_next=hr,globalThis.proxy_js_ref_map=new Map,globalThis.proxy_js_map=new Map,globalThis.proxy_js_existing=[void 0],globalThis.pyProxyFinalizationRegistry=new FinalizationRegistry(d=>{globalThis.proxy_js_map.delete(d),Module.ccall("proxy_c_free_obj","null",["number"],[d])})}function vr(d){const u=proxy_js_ref_map.get(d);if(u!==void 0)return u;for(;proxy_js_ref_next<proxy_js_ref.length;){if(proxy_js_ref[proxy_js_ref_next]===void 0){const h=proxy_js_ref_next;return++proxy_js_ref_next,proxy_js_ref[h]=d,proxy_js_ref_map.set(d,h),h}++proxy_js_ref_next}const a=proxy_js_ref.length;return proxy_js_ref[a]=d,proxy_js_ref_next=proxy_js_ref.length,proxy_js_ref_map.set(d,a),a}function C(d,u){let a;if(d===void 0)a=Hr;else if(d===null)a=Wr;else if(typeof d=="boolean")a=Gr,Module.setValue(u+4,d,"i32");else if(typeof d=="number")if(Number.isInteger(d))a=Yr,Module.setValue(u+4,d,"i32");else{a=$r;const h=u+4&-8;Module.setValue(h,d,"double");const S=Module.getValue(h,"i32"),D=Module.getValue(h+4,"i32");Module.setValue(u+4,S,"i32"),Module.setValue(u+8,D,"i32")}else if(typeof d=="string"){a=Kr;const h=Module.lengthBytesUTF8(d),S=Module._malloc(h+1);Module.stringToUTF8(d,S,h+1),Module.setValue(u+4,h,"i32"),Module.setValue(u+8,S,"i32")}else if(d instanceof Q||typeof d=="function"&&"_ref"in d||d instanceof we)a=Xr,Module.setValue(u+4,d._ref,"i32");else{a=Er;const h=vr(d);Module.setValue(u+4,h,"i32")}Module.setValue(u+0,a,"i32")}function qr(d,u){if(d instanceof Q||typeof d=="function"&&"_ref"in d||d instanceof we){const a=Er,h=vr(d);Module.setValue(u+4,h,"i32"),Module.setValue(u+0,a,"i32")}else C(d,u)}function N(d){const u=Module.getValue(d,"i32");let a;if(u===Nr){const h=Module.getValue(d+4,"i32"),S=Module.getValue(d+8,"i32"),D=Module.UTF8ToString(S,h);Module._free(S);const P=D.split("");throw new gr(P[0],P[1])}if(u===Or)throw new Error("NULL object");if(u===Rr)a=null;else if(u===jr)a=!!Module.getValue(d+4,"i32");else if(u===Ir)a=Module.getValue(d+4,"i32");else if(u===Cr){const h=d+4&-8,S=Module.getValue(d+4,"i32"),D=Module.getValue(d+8,"i32");Module.setValue(h,S,"i32"),Module.setValue(h+4,D,"i32"),a=Module.getValue(h,"double")}else if(u===Lr){const h=Module.getValue(d+4,"i32"),S=Module.getValue(d+8,"i32");a=Module.UTF8ToString(S,h)}else if(u===zr){const h=Module.getValue(d+4,"i32");a=proxy_js_ref[h]}else if(u===Vr){const h=Module.getValue(d+4,"i32");a=globalThis.proxy_js_existing[h],globalThis.proxy_js_existing[h]=void 0}else{const h=Module.getValue(d+4,"i32");if(u===Ur)a=(...S)=>function(D,P){let R=0;for(;P.length>0&&P[P.length-1]===void 0;)P.pop();if(P.length>0){R=Module._malloc(3*P.length*4);for(const w in P)C(P[w],R+3*w*4)}const E=Module._malloc(12);Module.ccall("proxy_c_to_js_call","null",["number","number","number","pointer"],[D,P.length,R,E]),P.length>0&&Module._free(R);const b=le(E);return b instanceof we?Promise.resolve(b):b}(h,S),a._ref=h;else if(u===Br)a=new we(h);else{const S=new Q(h);a=new Proxy(S,Dr)}globalThis.pyProxyFinalizationRegistry.register(a,h),globalThis.proxy_js_map.set(h,new WeakRef(a))}return a}function le(d){const u=N(d);return Module._free(d),u}export{xr as default,yr as loadMicroPython};
