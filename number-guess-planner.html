<!DOCTYPE html>
<html>
<head>
    <title>Number Guess Function Planner</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        #planner {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="function-planner.css">
    <script src="https://unpkg.com/gojs@3.0.22"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="https://unpkg.com/sweetalert2@11.22.0/dist/sweetalert2.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.30.0/components/prism-core.min.js"></script>
    <script src="https://unpkg.com/prismjs@1.30.0/components/prism-python.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/sweetalert2@11.22.0/dist/sweetalert2.min.css">
    <script type="module">
    import init from "./function-planner.js";

    let model = {
            functions: [
            {
                key: 1,
                name: "main",
                io: "indirect",
                code: "user_name = input(\"What's your name? \")\nplay_one_game(user_name)",
                showCode: true,
                readOnly: true
            },
            {
                key: 2,
                name: "get_guess_outcome",
                desc: "Checks a guessed number against an actual value, returning a value based on if it is less than, more than, or equal to the actual value. It also looks for values that are 'not even close'.",
                params: [
                    {name: "guessed", type: "int", desc: "the guessed number"},
                    {name: "actual", type: "int", desc: "the actual number to be guessed (i.e. the answer)"}
                ],
                returns: [{type: "str", desc: "the message to show"}],
                io: "none",
                testable: true,
                code: "diff = guessed - actual\nif diff < 0:\n    return 'Your guess was too low.'\nelif diff < -20:\n    return 'Your guess was too low (not even close)!'\nelif diff > 0:\n    return 'Your guess was too high.'\nelse:\n    return 'Your guess was too high (not even close)!'",
                showCode: true,
                readOnly: ['name', 'desc', 'params', 'returns', 'io', 'testable', 'code'],
            },
            {
                key: 3,
                name: "play_one_game",
                desc: "Plays a single number-guessing game with the user (whose name is given as an argument). To play the game, the computer thinks of a number, and then repeatedly:\n    * gets a guess from the user\n    * checks the guess against the computer's number\n    * prints the outcome string\n    * updates the allowed range for guesses\nThat stops once the user guesses the correct number. Then, the user is informed how many guesses it took them.",
                params: [{name: "user_name", type: "str", desc: "the name of the user/game player"}],
                returns: [{type: "int", desc: "the number of guesses it took the user to guess the number"}],
                io: "indirect",
                code: "# The initial range of possible guesses, will be updated as the game progresses\nmin_guess = 1\nmax_guess = 100\n\n# Have the computer think of a number\nnumber = thinking_of_a_number(user_name)\n\n# Initialize the number of guesses\nnum_guesses = 0\n\n# Repeat until correctly guessed\ncorrect = False\nwhile not correct:\n    correct, min_guess, max_guess = play_one_round(user_name, number, min_guess, max_guess)\n    num_guesses += 1\n\n# Display the results\ndisplay_result(user_name, num_guesses)\n\nreturn num_guesses",
                showCode: true,
                readOnly: ['name', 'desc', 'params', 'returns', 'io', 'testable', 'code'],
            }
        ],
        calls: [{"from": 1, "to": 3}]
    };
    let allowed_types = ["int", "str", "float", "bool", "list"];
    console.log(model);
    document.addEventListener("DOMContentLoaded", () => {
        init("planner", null, "number-guess", model, allowed_types, 7, 1);
    });
    </script>
</head>
<body>
    <div id="planner"></div>
</body>
</html>


